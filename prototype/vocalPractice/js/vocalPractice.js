(function(){function m(a){d.pause();d.currentTime&&(d.currentTime=0);f&&clearInterval(f);h({btn:e,type:"remove","class":"off"});h({btn:l,type:"add","class":"off"});a&&a.stop&&a.stop()}function g(){var a=$vp.audio.currentTime,b;$vp.syncTime[$vp.stepMODE].forEach(function(p,c){var k=p[1];a>=p[0]&&a<k&&(b=c)});return b}function h(a){a.btn.classList[a.type](a["class"])}setTimeout(function(){$ts.getEl("main")[0].style.opacity=1},300);(function(){function a(a){window.$efSound[c]=function(){$ts.createAudio.interval(a.duration,
function(){for(var c in b)b[c].pause(),b[c].currentTime&&(b[c].currentTime=0);a.play()})}}window.$efSound={};var b={click:$ts.createAudio.set("./../../common/libs/media/click.mp3"),correct:$ts.createAudio.set("./../../common/libs/media/correct.mp3"),incorrect:$ts.createAudio.set("./../../common/libs/media/incorrect.mp3")},c;for(c in b)a(b[c])})();var c={},d=$ts.getEl("[data-audio]")[0],e=$ts.getEl('[data-play-btn="play"]')[0],l=$ts.getEl('[data-play-btn="pause"]')[0],n=$ts.getEl('[data-play-btn="stop"]')[0],
f,b;d.addEventListener("ended",m);d.addEventListener("playing",function(){f=setInterval(function(){var a=b,c=$ts.getEl('[data-page="'+$vp.stepMODE+"_"+$vp.listenMODE+'"]')[0];b=void 0==g()?a:"down"===$vp.listenMODE?parseInt(g())+6:parseInt(g());var d=12<=b?"012":9>b?"00"+(b+1):"0"+(b+1);a!==b&&(c.src="./images/"+$vp.stepMODE+"_"+d+".svg")})});e.addEventListener("click",function(){setTimeout(function(){$vp.play({play:function(){}})},100)});l.addEventListener("click",function(){setTimeout(function(){$vp.pause({pause:function(){clearInterval(f)}})},
100)});n.addEventListener("click",function(){setTimeout(function(){$vp.stop({stop:function(){clearInterval(f);b=0;$ts.getEl('[data-page="'+$vp.stepMODE+"_"+$vp.listenMODE+'"]')[0].src="./images/"+$vp.stepMODE+"_001.svg"}})},100)});e.addEventListener("click",$efSound.click);l.addEventListener("click",$efSound.click);n.addEventListener("click",$efSound.click);console.log("stepMODE:","step5");console.log("listenMODE:","updown");c.stepMODE="step5";c.listenMODE="updown";c.audio=d;c.syncTime={step5:[[0,
10.237778],[10.237778,20.017147],[20.017147,29.567313],[29.567313,39.041077],[39.041077,48.744045],[48.744045,58.447014],[58.447014,67.844377],[67.844377,77.470943],[77.470943,87.021109],[87.021109,96.800479],[96.800479,106.197842],[106.197842,116.359218]],step3:[[0,5.037393],[5.037393,9.838658],[9.838658,14.679278],[14.679278,19.441188],[19.441188,24.242453],[24.242453,29.594683],[29.594683,34.671431],[34.671431,39.393987],[39.393987,44.234606],[44.234606,49.075226],[49.114581,53.837136],[53.837136,
59.89775]]};c.stop=m;c.pause=function(a){d.pause();h({btn:e,type:"remove","class":"off"});h({btn:l,type:"add","class":"off"});a&&a.pause&&a.pause()};c.play=function(a){d.play();h({btn:e,type:"add","class":"off"});h({btn:l,type:"remove","class":"off"});a&&a.play&&a.play()};window.$vp=c})();
(function(){function m(b,a){b.src="./media/"+a+".mp3";console.log("audio:",a)}function g(b,a){b.forEach(function(c){var f=c.getAttribute("data-"+a+"-btn"),e=[],k;"step"===a?k=d:"listen"===a&&(k=l);for(var g in k)f==k[g].getAttribute("data-"+a+"-page")&&e.push(k[g]);new h({btn:c,btns:b,curPage:e,pages:k,callBack:function(){$vp.stop();setTimeout(function(){$vp.play()},100)}})})}function h(b){function a(a){a.forEach(function(a){a.classList.remove("on")})}var c=b.btn,d=b.btns,e=b.curPage,f=b.pages,g=
b.callBack;c.addEventListener("click",function(){a(f);a(d);c.classList.add("on");e.forEach(function(a){a.classList.add("on")});g&&g(e)});c.addEventListener("click",$efSound.click)}var c=$ts.getEl("[data-step-btn]"),d=$ts.getEl("[data-step-page]"),e=$ts.getEl("[data-listen-btn]"),l=$ts.getEl("[data-listen-page]"),n=$ts.getEl("button"),f;for(f in n)$ts.addHoverEvents(n[f],"preventDefault");c.forEach(function(b){b.addEventListener("click",function(){var a=this.getAttribute("data-step-btn");$vp.stepMODE=
a;m($vp.audio,a+"_"+$vp.listenMODE)});b.addEventListener("click",$efSound.click)});e.forEach(function(b){b.addEventListener("click",function(){var a=this.getAttribute("data-listen-btn");$vp.listenMODE=a;m($vp.audio,$vp.stepMODE+"_"+a)});b.addEventListener("click",$efSound.click)});g(c,"step");g(e,"listen")})();